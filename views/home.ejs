<!doctype html>
<html lang="en">
<%- include("./partials/header", {title:"Page d'accueil"}) %>

<body>
  <div class="container">
    <svg class="svg-light" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 3787 2842" fill="none">
      <g filter="url(#filter)">
        <ellipse cx="1924.71" cy="273.501" rx="1924.71" ry="273.501" transform="matrix(-0.822377 -0.568943 -0.568943 0.822377 3631.88 2291.09)" fill="hsl(217.2, 95%, 70%)" fill-opacity="0.21"></ellipse>
      </g>
      <defs>
        <filter id="filter" x="0.860352" y="0.838989" width="3785.16" height="2840.26" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
          <feFlood flood-opacity="0" result="BackgroundImageFix"></feFlood>
          <feBlend mode="normal" in="SourceGraphic" in2="BackgroundImageFix" result="shape"></feBlend>
          <feGaussianBlur stdDeviation="151" result="effect1_foregroundBlur_1065_8"></feGaussianBlur>
        </filter>
      </defs>
    </svg>
    <% if (locals.connected) { %>
    <h1>Bonjour <%= locals.user.username %></h1>
    <% } else { %>
    <h1>Bonjour Inconnu</h1>
    <% } %>

    <% if (locals.posts) { %>
    <main class="posts">
      <% posts.forEach(post => { %>
      <div class="post">
        <h3 class="post_title"><%= post.title %></h3>
        <p class="post_content"><%= post.content.substring(0,600).concat("...") %></p>
        <div class="post_read_date">
          <a class="post_read" href="/post/detail/<%= post.id%>">Lire la suite <i class="fa-solid fa-arrow-right"></i></a>
          <%- include("./components/postdate", {createdRow: post.created_at}) %>
        </div>
      </div>
      <% }) %>
    </main>
    <% } %>
  </div>
</body>

</html>